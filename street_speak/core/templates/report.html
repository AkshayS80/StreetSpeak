{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2>Report an Issue</h2>

<form method="post" enctype="multipart/form-data" onsubmit="showSpinner()">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="hidden" id="id_latitude" name="latitude">
    <input type="hidden" id="id_longitude" name="longitude">
    <button type="submit">Submit</button>
</form>

<!-- Spinner section -->
<div id="spinner" style="display:none; margin-top: 20px;">
    <p>Scanning image with AI... please wait</p>
    <img src="{% static 'spinner.gif' %}" alt="Loading..." width="50" height="50" />
</div>
{% endblock %}

<script>
navigator.geolocation.getCurrentPosition(function(position) {
    document.getElementById('id_latitude').value = position.coords.latitude;
    document.getElementById('id_longitude').value = position.coords.longitude;
});

function showSpinner() {
    document.getElementById('spinner').style.display = 'block';
}
</script>